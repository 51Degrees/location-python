<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees Location Python: cloud/web.py</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="docs-main.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  <a id="projectlogo" href="../../documentation/4.4/index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png"/></a>
  <span class="c-tagline">51Degrees Location Python
   &#160;<span id="projectnumber">4.4</span>
  </span>
  </h1>
  <div id="projectalign" style="padding-left: 0.5em;">
   <div id="projectbrief">Reverse Geo-Location services for 51Degrees Pipeline</div>
  </div>
  <div id="main-nav"></div>
     <div class="g-search">
    <div class="c-search is-openable">
    <form class="c-search__form">
      <div id="MSearchBox" class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img id="MSearchSelect" src="icon-search.svg" class="b-icon" alt="Search" 
                 onmouseover="return searchBox.OnSearchSelectShow()"
                 onmouseout="return searchBox.OnSearchSelectHide()"/>
        <input type="text" id="MSearchField" autocomplete="off" class="c-search__input" id="inputSearch" placeholder="Type a class, namespace etc." aria-label="Search"
                 onfocus="searchBox.OnSearchFieldFocus(true)" 
                 onblur="searchBox.OnSearchFieldFocus(false)" 
                 onkeyup="searchBox.OnSearchFieldChange(event)">
         <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
      </div>
    </form>
  </div>
</div>
</div>
<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('cloud_2web_8py-example.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="g-docs__header">
<h2 class="g-docs__page-title">cloud/web.py</h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<p>This example is designed to output location data using the client-side evidence feature of the pipeline. This example uses the client-side evidence feature of the Pipeline to get location information from the client. This information is used to populate properties containing JavaScript snippets, which are then bundled together into a single JavaScript block by the 'JsonBundler' and 'JavaScriptBuilder' elements. This JavaScript is then used to obtain the additional evidence from the client and pass it back to the server. The Pipeline running on the server then processes this evidence to populate a new JSON result object that is returned to the client.</p>
<p>This example is available in full on <a href="https://github.com/51Degrees/location-python/blob/main/examples/cloud/web.py">GitHub</a></p>
<div class="c-code__block c-code__block--outline"><div class="c-code__line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="c-code__comment"># *********************************************************************</span></div><div class="c-code__line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="c-code__comment"># This Original Work is copyright of 51 Degrees Mobile Experts Limited.</span></div><div class="c-code__line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="c-code__comment"># Copyright 2025 51 Degrees Mobile Experts Limited, Davidson House,</span></div><div class="c-code__line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="c-code__comment"># Forbury Square, Reading, Berkshire, United Kingdom RG1 3EU.</span></div><div class="c-code__line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="c-code__comment">#</span></div><div class="c-code__line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="c-code__comment"># This Original Work is licensed under the European Union Public Licence</span></div><div class="c-code__line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="c-code__comment"># (EUPL) v.1.2 and is subject to its terms as set out below.</span></div><div class="c-code__line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="c-code__comment">#</span></div><div class="c-code__line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="c-code__comment"># If a copy of the EUPL was not distributed with this file, You can obtain</span></div><div class="c-code__line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="c-code__comment"># one at https://opensource.org/licenses/EUPL-1.2.</span></div><div class="c-code__line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="c-code__comment">#</span></div><div class="c-code__line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="c-code__comment"># The &#39;Compatible Licences&#39; set out in the Appendix to the EUPL (as may be</span></div><div class="c-code__line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="c-code__comment"># amended by the European Commission) shall be deemed incompatible for</span></div><div class="c-code__line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="c-code__comment"># the purposes of the Work and the provisions of the compatibility</span></div><div class="c-code__line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="c-code__comment"># clause in Article 5 of the EUPL shall not apply.</span></div><div class="c-code__line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="c-code__comment">#</span></div><div class="c-code__line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="c-code__comment"># If using the Work as, or as part of, a network application, by</span></div><div class="c-code__line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="c-code__comment"># including the attribution notice(s) required under Article 5 of the EUPL</span></div><div class="c-code__line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="c-code__comment"># in the end user terms of the application under an appropriate heading,</span></div><div class="c-code__line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="c-code__comment"># such notice(s) shall fulfill the requirements of that article.</span></div><div class="c-code__line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="c-code__comment"># *********************************************************************</span></div><div class="c-code__line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="c-code__line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="c-code__line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="c-code__line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="c-code__keyword">from</span> fiftyone_location.location_pipelinebuilder <span class="c-code__keyword">import</span> LocationPipelineBuilder</div><div class="c-code__line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="c-code__keyword">from</span> fiftyone_pipeline_core.web <span class="c-code__keyword">import</span> webevidence</div><div class="c-code__line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="c-code__keyword">import</span> json</div><div class="c-code__line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="c-code__line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="c-code__comment"># First create the location pipeline with the desired settings.</span></div><div class="c-code__line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="c-code__line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="c-code__comment"># You need to create a resource key at https://configure.51degrees.com</span></div><div class="c-code__line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="c-code__comment"># and paste it into the code, replacing !!YOUR_RESOURCE_KEY!! below.</span></div><div class="c-code__line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="c-code__comment"># Alternatively, add a resource_key environment variable</span></div><div class="c-code__line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="c-code__keyword">import</span> os</div><div class="c-code__line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="c-code__keywordflow">if</span> <span class="c-code__stringliteral">&quot;resource_key&quot;</span> <span class="c-code__keywordflow">in</span> os.environ:</div><div class="c-code__line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    resource_key = os.environ[<span class="c-code__stringliteral">&quot;resource_key&quot;</span>]</div><div class="c-code__line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="c-code__keywordflow">else</span>:</div><div class="c-code__line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    resource_key = <span class="c-code__stringliteral">&quot;!!YOUR_RESOURCE_KEY!!&quot;</span></div><div class="c-code__line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="c-code__line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="c-code__keywordflow">if</span> resource_key == <span class="c-code__stringliteral">&quot;!!YOUR_RESOURCE_KEY!!&quot;</span>:</div><div class="c-code__line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    print(<span class="c-code__stringliteral">&quot;&quot;&quot;</span></div><div class="c-code__line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="c-code__stringliteral">    You need to create a resource key at</span></div><div class="c-code__line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="c-code__stringliteral">    https://configure.51degrees.com and paste it into the code,</span></div><div class="c-code__line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="c-code__stringliteral">    &#39;replacing !!YOUR_RESOURCE_KEY!!</span></div><div class="c-code__line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="c-code__stringliteral">    To get a resourcekey with the properties used in this example go to https://configure.51degrees.com/GCrtGh1L</span></div><div class="c-code__line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="c-code__stringliteral">    &quot;&quot;&quot;</span>)</div><div class="c-code__line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="c-code__keywordflow">else</span>:</div><div class="c-code__line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="c-code__line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="c-code__comment"># Here we add some callback settings for the page to make a request with extra evidence from the client side, in this case the Flask /json route we will make below</span></div><div class="c-code__line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="c-code__line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    javascript_builder_settings = {</div><div class="c-code__line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="c-code__stringliteral">&quot;endpoint&quot;</span>: <span class="c-code__stringliteral">&quot;/json&quot;</span></div><div class="c-code__line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    }</div><div class="c-code__line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="c-code__line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    pipeline = LocationPipelineBuilder(resource_key=resource_key, settings={<span class="c-code__stringliteral">&quot;javascript_builder_settings&quot;</span>: javascript_builder_settings}).build()</div><div class="c-code__line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="c-code__line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="c-code__keyword">from</span> flask <span class="c-code__keyword">import</span> Flask, request</div><div class="c-code__line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="c-code__line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    app = Flask(__name__)</div><div class="c-code__line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="c-code__line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="c-code__comment"># First we make a JSON route that will be called from the client side and will return</span></div><div class="c-code__line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="c-code__comment"># a JSON encoded property database using any additional evidence provided by the client</span></div><div class="c-code__line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="c-code__line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    @app.route(<span class="c-code__stringliteral">&#39;/json&#39;</span>, methods=[<span class="c-code__stringliteral">&#39;POST&#39;</span>])</div><div class="c-code__line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="c-code__keyword">def </span>jsonroute():</div><div class="c-code__line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="c-code__line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="c-code__comment"># Create the flowData object for the JSON route</span></div><div class="c-code__line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        flowData = pipeline.create_flowdata()</div><div class="c-code__line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="c-code__line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="c-code__comment"># Add any information from the request (headers, cookies and additional</span></div><div class="c-code__line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="c-code__comment"># client side provided information)</span></div><div class="c-code__line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="c-code__line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        flowData.evidence.add_from_dict(webevidence(request))</div><div class="c-code__line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="c-code__line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="c-code__comment"># Process the flowData</span></div><div class="c-code__line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        flowData.process()</div><div class="c-code__line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="c-code__line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="c-code__comment"># Return the JSON from the JSONBundler engine</span></div><div class="c-code__line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="c-code__keywordflow">return</span> json.dumps(flowData.jsonbundler.json)</div><div class="c-code__line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="c-code__line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="c-code__comment"># Helper function to get a property value if it exists and return</span></div><div class="c-code__line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="c-code__comment"># the reason why if it doesn&#39;t</span></div><div class="c-code__line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="c-code__keyword">def </span>getValueHelper(flowdata, engine, propertyKey):</div><div class="c-code__line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="c-code__line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        engineProperties = getattr(flowdata, engine)</div><div class="c-code__line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="c-code__line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        propertyValue = getattr(engineProperties, propertyKey)</div><div class="c-code__line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="c-code__line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="c-code__keywordflow">if</span> propertyValue.hasValue():</div><div class="c-code__line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <span class="c-code__keywordflow">return</span> propertyValue.value()</div><div class="c-code__line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="c-code__keywordflow">else</span>:</div><div class="c-code__line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            <span class="c-code__keywordflow">return</span> propertyValue.no_value_message()</div><div class="c-code__line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="c-code__line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="c-code__comment"># In the main route we dynamically update the screen&#39;s device property display</span></div><div class="c-code__line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="c-code__comment"># using the above JSON route</span></div><div class="c-code__line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="c-code__line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    @app.route(<span class="c-code__stringliteral">&#39;/&#39;</span>)</div><div class="c-code__line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="c-code__keyword">def </span>server():</div><div class="c-code__line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="c-code__line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="c-code__comment"># Create the flowData object for the JSON route</span></div><div class="c-code__line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        flowData = pipeline.create_flowdata()</div><div class="c-code__line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="c-code__line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="c-code__comment"># Add any information from the request (headers, cookies and additional</span></div><div class="c-code__line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="c-code__comment"># client side provided information)</span></div><div class="c-code__line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="c-code__line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        flowData.evidence.add_from_dict(webevidence(request))</div><div class="c-code__line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="c-code__line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="c-code__comment"># Process the flowData</span></div><div class="c-code__line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="c-code__line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        flowData.process()</div><div class="c-code__line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="c-code__line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="c-code__comment"># Generate the HTML</span></div><div class="c-code__line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        output = <span class="c-code__stringliteral">&quot;&quot;</span></div><div class="c-code__line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="c-code__line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="c-code__comment"># Add the JavaScript created by the pipeline</span></div><div class="c-code__line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        output += <span class="c-code__stringliteral">&quot;&lt;script&gt;&quot;</span></div><div class="c-code__line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        output += flowData.javascriptbuilder.javascript</div><div class="c-code__line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        output += <span class="c-code__stringliteral">&quot;&lt;/script&gt;&quot;</span></div><div class="c-code__line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="c-code__line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="c-code__line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        output += <span class="c-code__stringliteral">&quot;&lt;h1&gt;Client side evidence&lt;/h1&gt;&quot;</span></div><div class="c-code__line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="c-code__line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="c-code__comment"># Print a button which gets the user&#39;s location information</span></div><div class="c-code__line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="c-code__comment"># This is then sent to the previously specified json endpoint</span></div><div class="c-code__line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="c-code__comment"># Data comes back from the request and populates the country in the HTML</span></div><div class="c-code__line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="c-code__line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        output += <span class="c-code__stringliteral">&quot;&quot;&quot;</span></div><div class="c-code__line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="c-code__stringliteral"></span></div><div class="c-code__line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="c-code__stringliteral">        &lt;p&gt;After you select the &quot;use my location&quot; button below, client side JavaScript will</span></div><div class="c-code__line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="c-code__stringliteral">        update the country field using this information.&lt;/p&gt;</span></div><div class="c-code__line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="c-code__stringliteral"></span></div><div class="c-code__line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="c-code__stringliteral">        &lt;p&gt;Country: &lt;span id=country&gt;&lt;/span&gt;&lt;/p&gt;</span></div><div class="c-code__line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="c-code__stringliteral"></span></div><div class="c-code__line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="c-code__stringliteral">        &lt;button type=&quot;button&quot; onclick=&quot;getLocation()&quot;&gt;Use my location&lt;/button&gt;</span></div><div class="c-code__line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="c-code__stringliteral"></span></div><div class="c-code__line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="c-code__stringliteral">        &lt;script&gt;</span></div><div class="c-code__line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="c-code__stringliteral"></span></div><div class="c-code__line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="c-code__stringliteral">        let getLocation = function() {</span></div><div class="c-code__line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="c-code__stringliteral">            fod.complete(function (data) {</span></div><div class="c-code__line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="c-code__stringliteral">                document.getElementById(&quot;country&quot;).innerHTML = data.location.country</span></div><div class="c-code__line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="c-code__stringliteral">            }, &#39;location&#39;);</span></div><div class="c-code__line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="c-code__stringliteral">        }</span></div><div class="c-code__line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="c-code__stringliteral">            </span></div><div class="c-code__line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="c-code__stringliteral">        &lt;/script&gt;</span></div><div class="c-code__line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="c-code__stringliteral"></span></div><div class="c-code__line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="c-code__stringliteral"></span></div><div class="c-code__line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="c-code__stringliteral">        &quot;&quot;&quot;</span></div><div class="c-code__line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="c-code__line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="c-code__keywordflow">return</span> output</div></div> </div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
